<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HLS TV Player - Fast Loading</title>

<meta name="monetag" content="f6122dcf0ae0344432a93322d9615e30">

<style>
html, body { margin:0; padding:0; height:100%; background:#000; overflow:hidden; }
#video-container { position:fixed; inset:0; background:#000; }
video { width:100%; height:100%; object-fit:contain; background:#000; }
#playBtn { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-size:70px; color:white; background:rgba(0,0,0,0.5); padding:25px 40px; border-radius:50%; cursor:pointer; z-index:10000; border:2px solid white; transition:opacity 0.3s ease; }
#unmuteBtn { position:absolute; top:10px; left:10px; z-index:9999; background:rgba(0,0,0,0.6); color:white; padding:10px 16px; border-radius:8px; font-size:16px; border:1px solid white; cursor:pointer; }
#fullscreenBtn { position:absolute; top:10px; right:10px; z-index:9999; background:rgba(0,0,0,0.6); color:white; padding:10px 16px; border-radius:8px; font-size:18px; border:1px solid white; cursor:pointer; }
#loading { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); border:6px solid rgba(255,255,255,0.2); border-top:6px solid white; border-radius:50%; width:60px; height:60px; animation:spin 1s linear infinite; z-index:9999; display:none; }
@keyframes spin { 0% { transform:translate(-50%, -50%) rotate(0deg); } 100% { transform:translate(-50%, -50%) rotate(360deg); } }
</style>
</head>

<body>

<div id="video-container">
  <video id="player" playsinline muted preload="auto"></video>
  <div id="loading"></div>
  <div id="playBtn">‚ñ∂Ô∏è</div>
  <button id="unmuteBtn">üîä Unmute</button>
  <button id="fullscreenBtn">‚õ∂</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.7"></script>

<script>
const video = document.getElementById("player");
const playBtn = document.getElementById("playBtn");
const unmuteBtn = document.getElementById("unmuteBtn");
const fullscreenBtn = document.getElementById("fullscreenBtn");
const loading = document.getElementById("loading");
const manifest = "https://shorten.is/nba1";

let hls, lastTime = 0, wasUnmuted=false;
loading.style.display = "block";

/* --------------------------
    FAST HLS LOAD
---------------------------*/
function initHls() {
  if (Hls.isSupported()) {
    hls = new Hls({ maxBufferHole:1 });
    hls.loadSource(manifest);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, () => {
      video.play().catch(()=>{});
      loading.style.display = "none";
    });
  } else if(video.canPlayType("application/vnd.apple.mpegurl")) {
    video.src = manifest;
    video.addEventListener('loadeddata', () => loading.style.display = "none");
    video.play().catch(()=>{});
  }
}
initHls();

/* --------------------------
    FAST MONETAG LOAD
---------------------------*/
(function loadMonetagOnce() {
  const s1=document.createElement('script');
  s1.dataset.zone='10131170'; s1.src='https://al5sm.com/tag.min.js'; s1.async=true;
  const s2=document.createElement('script');
  s2.dataset.zone='10131172'; s2.src='https://groleegni.net/vignette.min.js'; s2.async=true;
  document.body.appendChild(s1); document.body.appendChild(s2);
})();

/* Trigger monetag again on buttons */
[playBtn, unmuteBtn, fullscreenBtn].forEach(btn => {
  btn.addEventListener('click', () => {
    if (window.MonetagReload) window.MonetagReload();
  });
});

/* --------------------------
    LOADER EVENTS
---------------------------*/
video.addEventListener("waiting", ()=>loading.style.display="block");
video.addEventListener("seeking", ()=>loading.style.display="block");
video.addEventListener("stalled", ()=>loading.style.display="block");
video.addEventListener("canplay", ()=>loading.style.display="none");
video.addEventListener("playing", ()=>loading.style.display="none");
video.addEventListener("loadeddata", ()=>loading.style.display="none");

/* --------------------------
       PLAY BUTTON
---------------------------*/
playBtn.addEventListener("click", () => {
  video.play();
  playBtn.style.display="none";
  wasUnmuted && (video.muted=false);
});

/* --------------------------
       UNMUTE BUTTON
---------------------------*/
unmuteBtn.addEventListener("click", () => {
  video.muted = false;
  video.volume = 1;
  unmuteBtn.style.display="none";
  wasUnmuted = true;
});

/* --------------------------
       FULLSCREEN BUTTON
---------------------------*/
fullscreenBtn.addEventListener("click", () => {
  const vc = document.getElementById("video-container");
  if(!document.fullscreenElement) vc.requestFullscreen();
  else document.exitFullscreen();
});

/* --------------------------
       FREEZE MONITOR
---------------------------*/
setInterval(() => {
  if(!video.paused && video.currentTime===lastTime){
    console.log("Video frozen, reloading...");
    if(hls) hls.destroy();
    initHls();
  }
  lastTime=video.currentTime;
},4000);
</script>

</body>
</html>
